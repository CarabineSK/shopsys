{% extends '@ShopsysShop/Admin/Layout/layoutWithPanel.html.twig' %}

{% block title %}- {{ 'Category'|trans }}{% endblock %}
{% block h1 %}{{ 'Category'|trans }}{% endblock %}
{% block main_content %}
	{% if isMultidomain() %}
		{% set cssClassOnMultidomainInputs = 'input--domain' %}
	{% else %}
		{% set cssClassOnMultidomainInputs = '' %}
	{% endif %}

	{{ form_start(form) }}
		{{ form_errors(form) }}
		<div class="form-group wrap-border">
			<div class="form-group__title">
				{{ 'Settings'|trans }}
			</div>
			{{ form_id(category|default(null)) }}
			{{ form_row(form.name, { label: 'Name'|trans }) }}
			{{ form_row(form.parent, { label: 'Ancestor category'|trans}) }}
			{{ form_row(form.showOnDomains, { label: 'Display on'|trans}) }}
			{{ form_row(form.heurekaCzFeedCategory, { label: 'Category Heureka.cz'|trans, attr: { class: 'js-autocomplete-selectbox'}}) }}
			{% block category_urls %}{% endblock %}
		</div>

		<div class="form-group wrap-border">
			<div class="form-group__title">
				{{ 'SEO'|trans }}
			</div>

			<div class="form-line">
				<strong class="form-line__label">
					{{ 'Headline'|trans }}:
				</strong>
				{% for domainId, seoTitleForm in form.seoTitles %}
					<div class="form-line__side {% if not loop.first %}mt5{% endif %} js-characters-counter">
						<div class="form-line__item form-line__item--left">
							<div class="input__wrap">
								{{ form_widget(seoTitleForm, {
									multidomain: true,
									domainId: domainId,
									attr: {
										class: 'js-dynamic-placeholder js-characters-counter-input ' ~ cssClassOnMultidomainInputs,
										'data-placeholder-source-input-id': 'category_form_name_' ~ seoTitleForm.vars.domainConfig.locale
									}
								}) }}
								{% if isMultidomain() %}
									<span class="input__domain">
										{{ domainIcon(domainId) }}
									</span>
								{% endif %}
							</div>
						</div>

						<div class="form-line__count">
							<span class="form-line__count__desc js-characters-counter-info" data-recommended-length="60"></span>
						</div>
						{{ form_errors(seoTitleForm) }}
					</div>
				{% endfor %}
			</div>

			<div class="form-line">
				<strong class="form-line__label">
					{{ 'Meta description'|trans }}:
				</strong>

				{% for domainId, seoMetaDescriptionForm in form.seoMetaDescriptions %}
					<div class="form-line__side {% if not loop.first %}margin-top-5{% endif %} js-characters-counter">
						<div class="form-line__item form-line__item--left">
							<span class="input__wrap">
								{{ form_widget(seoMetaDescriptionForm, {
									multidomain: true,
									domainId: domainId,
									attr: {
										class: 'js-characters-counter-input input--seo ' ~ cssClassOnMultidomainInputs
									}
								}) }}
								{% if isMultidomain() %}
									<span class="input__domain">
										{{ domainIcon(domainId) }}
									</span>
								{% endif %}
							</span>
						</div>

						<div class="form-line__count">
							<div class="form-line__count__desc js-characters-counter-info" data-recommended-length="155"></div>
						</div>
					</div>
					{{ form_errors(seoMetaDescriptionForm) }}
				{% endfor %}
			</div>
		</div>

		<div class="form-group wrap-border">
			<div class="form-group__title">
				{{ 'Description'|trans }}
			</div>
			{% for domainId, descriptionForm in form.descriptions %}
				{% if isMultidomain() %}
					<div class="form-line form-line--no-padd">
						<div class="form-line__group">
							<span class="form-line__group__image">
								{{ domainIcon(domainId, 'large') }}
							</span>
							<strong class="form-line__group__name">{{ getDomainName(domainId) }}</strong>
						</div>
					</div>
				{% endif %}
				<div class="form-line">
					<div class="form-line__line form-line__line--no-space">
						{{ form_widget(descriptionForm) }}
					</div>
				</div>
			{% endfor %}
		</div>

		<div class="form-group">
			<div class="form-group__title">
				{{ 'Picture'|trans }}
			</div>
			{% block image %}{% endblock %}
			{{ form_row(form.image, { label: 'Upload picture'|trans, infoText: 'You can upload following formats: PNG, JPG, GIF'|trans }) }}
		</div>

		{% embed '@ShopsysShop/Admin/Inline/FixedBar/fixedBar.html.twig' %}
			{% block fixed_bar_content %}
				<a href="{{ url('admin_category_list') }}" class="btn-link-style">{{ 'Back to overview'|trans }}</a>
				{{ form_save(category|default(null), form) }}
			{% endblock %}
		{% endembed %}
	{{ form_end(form) }}
{% endblock %}