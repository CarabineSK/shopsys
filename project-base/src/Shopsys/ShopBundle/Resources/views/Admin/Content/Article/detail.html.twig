{% extends '@ShopsysShop/Admin/Layout/layoutWithPanel.html.twig' %}

{% macro seoFormRow(form, label, recommendedLength = null, cssClass = '') %}
    <div class="form-line">
        <strong class="form-line__label">
            {{ form_label(form, label) }}
        </strong>

        <div class="form-line__side js-characters-counter">
            <div class="form-line__item form-line__item--left">
                <div class="input__wrap">
                    {% set attr = form.vars.attr|merge({class: form.vars.attr.class|default('') ~ ' js-characters-counter-input ' ~ cssClass}) %}
                    {{ form_widget(form, {attr: attr}) }}
                </div>
            </div>

            <div class="form-line__count">
                {% if recommendedLength is not null %}
                    <div class="form-line__count__desc js-characters-counter-info" data-recommended-length="{{ recommendedLength }}"></div>
                {% endif %}
            </div>
            {{ form_errors(form) }}
        </div>
    </div>
{% endmacro %}

{% block title %}- {{ 'Article'|trans }}{% endblock %}
{% block h1 %}{{ 'Article'|trans }}{% endblock %}

{% block main_content %}
    {{ form_start(form) }}
        {{ form_errors(form) }}

        <div class="form-group wrap-border">
            <div class="form-group__title">
                {{ 'Article data'|trans }}
            </div>

            {{ form_id(article|default(null)) }}

            {% block article_domain %}
                {{ form_row(form.domainId, { label: 'Domain'|trans }) }}
            {% endblock %}
            {% block article_placement %}{% endblock %}

            {{ form_row(form.name, { label: 'Name'|trans}) }}
            {{ form_row(form.hidden, { label: 'Hide'|trans, newline: true}) }}
            {{ form_row(form.text, { label: 'Content'|trans, newline: true}) }}
        </div>

        <div class="form-group">
            <div class="form-group__title">
                {{ 'SEO'|trans }}
            </div>

            {{ _self.seoFormRow(form.seoTitle, 'Page title'|trans, 60) }}
            {{ _self.seoFormRow(form.seoMetaDescription, 'Meta description'|trans, 155, 'input--seo') }}
            {{ _self.seoFormRow(form.seoH1, 'Heading (H1)'|trans) }}

            {% block article_urls %}{% endblock %}
        </div>

        {% embed '@ShopsysShop/Admin/Inline/FixedBar/fixedBar.html.twig' %}
            {% block fixed_bar_content %}
                <a href="{{ url('admin_article_list') }}" class="btn-link-style">{{ 'Back to overview'|trans }}</a>
                {{ form_save(article|default(null), form) }}
            {% endblock %}
        {% endembed %}
    {{ form_end(form) }}
{% endblock %}
