{% extends '@SS6Shop/Admin/Layout/layoutWithPanel.html.twig' %}

{% block title %}Objednávka č. {{ order.number }}{% endblock %}
{% block h1 %}Objednávka č. {{ order.number }}{% endblock %}

{% block main_content %}
	<div class="row">
		<div class="col-xs-12 col-lg-10">

			{{ form_start(form) }}
				{{ form_errors(form) }}

				<div class="wrap-group">
					<fieldset>
						{{ form_id(order) }}
						<div class="form-line">
							<label class="form-line__label">Doména:</label>
							<input type="text" value="{{ getDomainName(order.domainId) }}" class="form-control form-line__field" readonly="readonly">
						</div>
						{{ form_row(form.orderNumber, { label: 'Číslo objednávky' }) }}
						{{ form_row(form.statusId, { label: 'Stav' }) }}
						{{ form_row(form.customerId, { label: 'ID zákazníka' }) }}
					</fieldset>
				</div>

				<div class="wrap-group">
					<h2 class="mt-0">Osobní údaje</h2>
					<fieldset>
						{{ form_row(form.firstName, { label: 'Jméno' }) }}
						{{ form_row(form.lastName, { label: 'Příjmení' }) }}
						{{ form_row(form.email, { label: 'E-mail' }) }}
						{{ form_row(form.telephone, { label: 'Telefon', attr: { class: 'form-line--size-2' } }) }}
					</fieldset>
				</div>

				<div class="wrap-group">
					<h2 class="mt-0">Firemní údaje</h2>
					<fieldset>
						{{ form_row(form.companyName, { label: 'Název firmy' }) }}
						{{ form_row(form.companyNumber, { label: 'IČ', attr: { class: 'form-line--size-3' } }) }}
						{{ form_row(form.companyTaxNumber, { label: 'DIČ', attr: { class: 'form-line--size-3' } }) }}
					</fieldset>
				</div>

				<div class="wrap-group">
					<h2 class="mt-0">Fakturační údaje</h2>
					<fieldset>
						{{ form_row(form.street, { label: 'Ulice' }) }}
						{{ form_row(form.city, { label: 'Město' }) }}
						{{ form_row(form.postcode, { label: 'PSČ', attr: { class: 'form-line--size-2' } }) }}
					</fieldset>
				</div>

				<div class="wrap-group">
					<h2 class="mt-0">Doručovací adresa</h2>
					<fieldset>
						{{ form_row(form.deliveryContactPerson, { label: 'Kontaktní osoba' }) }}
						{{ form_row(form.deliveryCompanyName, { label: 'Firma' }) }}
						{{ form_row(form.deliveryTelephone, { label: 'Telefon', attr: { class: 'form-line--size-3' } }) }}
						{{ form_row(form.deliveryStreet, { label: 'Ulice' }) }}
						{{ form_row(form.deliveryCity, { label: 'Město' }) }}
						{{ form_row(form.deliveryPostcode, { label: 'PSČ', attr: { class: 'form-line--size-2' } }) }}
					</fieldset>
				</div>

				<div class="wrap-group">
					<h2 class="mt-0">Poznámka</h2>
					<fieldset>
						{{ form_row(form.note, { label: 'Napište nám' }) }}
					</fieldset>
				</div>

				<div class="wrap-group form-group">
					<h2 class="mt-0">Položky objednávky</h2>
					<fieldset>
						{% if form.items is not empty %}
							<div class="table-responsive">
								{{ form_errors(form.items) }}
								<table class="table table-striped table-hover">
									<thead>
										<tr>
											<th>Název</th>
											<th class="table-col-20 text-right">Jednotková cena s DPH</th>
											<th class="table-col-10 text-right">Množství</th>
											<th class="table-col-10 text-right">DPH</th>
											<th class="table-col-10 text-right">Celkem s DPH</th>
											<th class="table-col-10 text-right">Celkem bez DPH</th>
										</tr>
									</thead>
									<tbody>
										{% for orderItemId, orderItem in form.items %}
											<tr>
												<td>{{ form_widget(orderItem.name) }}</td>
												<td>{{ form_widget(orderItem.priceWithVat, {attr: { class: 'text-right'}}) }}</td>
												<td>{{ form_widget(orderItem.quantity, {attr: { class: 'text-right'}}) }}</td>
												<td>{{ form_widget(orderItem.vatPercent, {attr: { class: 'text-right'}}) }}</td>
												<td class="text-right text-middle">{{ orderItemTotalPricesById[orderItemId].basePriceWithVat|price }}</td>
												<td class="text-right text-middle">{{ orderItemTotalPricesById[orderItemId].basePriceWithoutVat|price }}</td>
											</tr>
										{% endfor %}
									</tbody>
									<tfoot>
										<tr>
											<th colspan="4">Celkem:</th>
											<th class="text-right">{{ order.totalPriceWithVat|price }}</th>
											<th class="text-right">{{ order.totalPriceWithoutVat|price }}</th>
										</tr>
									</tfoot>
								</table>
							</div>
						{% else %}
							{{ form_widget(form.items, { type: 'hidden' }) }}
							<div class="in-message in-message--info">
								Objednávka neobsahuje žádné položky.
							</div>
						{% endif %}
					</fieldset>
				</div>

				{{ form_widget(form.save, { label: 'Uložit změny'}) }}
				<a href="{{ url('admin_order_list') }}" class="btn btn-default">Zpět na přehled</a>
			{{ form_end(form) }}

		</div>
	</div>

{% endblock %}