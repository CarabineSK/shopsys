{% extends '@SS6Shop/Admin/Layout/layoutWithPanel.html.twig' %}

{% block title %}- {{ 'Kategorie'|trans }}{% endblock %}
{% block h1 %}{{ 'Kategorie'|trans }}{% endblock %}

{% block main_content %}

	<div class="row">
		<div class="col-xs-12 col-lg-10">

			<a href="{{ url('admin_category_new') }}" class="btn btn-primary mb-1">{{ 'Vytvořit novou kategorii'|trans }}</a>

			{% macro categoryTreeItem(categories, id) %}
				<ul class="js-category-tree-sorting-items">
					{% for category in categories %}
						<li class="js-category-tree-sorting-item">
							<div class="js-category-tree-sorting-item-line">
								<span class="js-category-tree-sorting-item-handle">{{ category.name }}</span>
								<span class="js-category-tree-sorting-item-icons">
									<a href="{{ url('admin_category_edit', {id: category.id}) }}">
										<i class="fa fa-pencil"></i>
									</a>
									<a
										href="{{ url('admin_category_delete', {id: category.id}) }}"
										onclick="
											SS6.window({
												content: '{{ 'Opravdu chcete smazat tuto kategorii?'|trans|e('js') }}',
												buttonCancel: true,
												buttonContinue: true,
												textContinue: '{{ 'Ano'|trans|e('js') }}',
												urlContinue: '{{ url('admin_category_delete', {id: category.id})|e('js') }}'
											});
											return false;"
									>
										<i class="fa fa-trash-o"></i>
									</a>
								</span>
							</div>
							{{ _self.categoryTreeItem(category.children) }}
						</li>
					{% endfor %}
				</ul>
			{% endmacro %}

			<div id="js-category-tree-sorting" class="category-tree-sorting mb-1">
				{{ _self.categoryTreeItem(rootCategories) }}
			</div>

			<button class="btn btn-primary btn-disabled" id="js-category-tree-sorting-save-button">
				{{ 'Uložit změny v pořadí'|trans }}
			</button>

		</div>
	</div>
{% endblock %}