{% extends 'APYDataGridBundle::blocks.html.twig' %}

{% block grid %}
<div class="grid">
{% if grid.totalCount > 0 or grid.isFiltered or grid.noDataMessage is sameas(false) %}
	<form id="{{ grid.hash }}" action="{{ grid.routeUrl }}" method="post">
		<div class="grid_header">
		{% if grid.massActions|length > 0 %}
			{{ grid_actions(grid) }}
		{% endif %}
		</div>
		<div class="grid_body table-responsive">
		<table class="table table-striped table-hover">
		{% if grid.isTitleSectionVisible %}
			{{ grid_titles(grid) }}
		{% endif %}
		{% if grid.isFilterSectionVisible %}
			{{ grid_filters(grid) }}
		{% endif %}
		{{ grid_rows(grid) }}
		</table>
		</div>
		<div class="grid_footer">
		{% if grid.isPagerSectionVisible %}
			{{ grid_pager(grid) }}
		{% endif %}
		{% if grid.exports|length > 0 %}
			{{ grid_exports(grid) }}
		{% endif %}
		{% if grid.tweaks|length > 0 %}
			{{ grid_tweaks(grid) }}
		{% endif %}
		</div>
		{% if withjs %}
			{{ grid_scripts(grid) }}
		{% endif %}
	</form>
{% else %}
	{{ grid_no_data(grid) }}
{% endif %}
</div>
{% endblock grid %}


{% block grid_column_actions_cell %}
	{% set actions = column.getActionsToRender(row) %}
	<span class="grid-row-actions action-icons">
	{% for action in actions %}
		<a
			href="{{ url(action.route, column.routeParameters(row, action), false) }}"
			{% if (action.attributes['data-action-name']|default('') == 'delete') or
				(action.attributes['data-action-name']|default('') == 'edit') %} class="table-action"
			{% else %}
				class="action-icons__item"
			{% endif %}
			target="{{ action.target }}"
			{% if action.confirm %} onclick="return confirm('{{ action.confirmMessage }}')"{% endif %}
			{% if row.field('id')|default('') is not empty %} data-id="{{ row.field('id') }}"{% endif %}
			{% for name, value in action.attributes %} {{ name }}="{{ value }}" {% endfor %}
			title="{{ action.title|trans }}">
			{% if action.attributes['data-action-name']|default('') == 'delete' %}
				<i class="fa fa-times"></i>
			{% elseif action.attributes['data-action-name']|default('') == 'edit' %}
				<i class="fa fa-pencil"></i>
			{% else %}
				{{ action.title|trans }}
			{% endif %}
		</a>

	{% endfor %}
	</span>
{% endblock grid_column_actions_cell %}

{% block grid_titles %}
	<thead>
		<tr class="grid-row-titles">
		{% for column in grid.columns %}
			{% if column.visible(grid.isReadyForExport) %}
				<th class="{% if column.align != 'left'%}text-{{ column.align }}{% endif %}{% if column.class %} {{ column.class }}{% endif %}{% if loop.last %} last-column{% endif %}"{% if(column.size > -1) %} style="width:{{ column.size }}px;"{% endif %}>
				{%- spaceless %}
				{% if column.type == 'massaction' %}
					<input type="checkbox" class="grid-mass-selector" onclick="{{ grid.hash }}_markVisible(this.checked);"/>
				{% else %}
					{% set columnTitle = grid.prefixTitle ~ column.title ~ '__abbr' %}
					{% if columnTitle|trans == columnTitle %}
						{% set columnTitle = grid.prefixTitle ~ column.title %}
					{% endif %}
					{% if (column.sortable) %}
						<a class="order" href="{{ grid_url('order', grid, column) }}" title="{{ 'Order by'|trans }} {{ columnTitle|trans }}">{{ columnTitle|trans }}
						{% if column.order == 'asc' %}
							<span class="sort_up sort-arrows sort-arrows--up"></span>
						{% elseif column.order == 'desc' %}
							<span class="sort_down sort-arrows sort-arrows--down"></span>
						{% endif %}
						</a>
					{% else %}
						{{ columnTitle|trans }}
					{% endif %}
				{% endif %}
				{% endspaceless -%}
				</th>
			{% endif %}
		{% endfor %}
		</tr>
	</thead>
{% endblock grid_titles %}

{% block grid_column_boolean_cell %}
	<span class="grid_boolean_{{ value }} semaphore semaphore--{{ value }}" title="{{ value }}">{{ block('grid_column_cell') }}</span>
{% endblock grid_column_boolean_cell %}

{% block grid_rows %}
	<tbody>
		{% for row in grid.rows %}
		{% set last_row = loop.last %}
		{% spaceless %}
			<tr{% if row.color != '' %} style="background-color:{{ row.color }};"{% endif %} class="grid-row-cells {{ cycle(['odd', 'even'], loop.index) }}{% if row.class != '' %} {{ row.class }}{% endif %}">
			{% for column in grid.columns %}
				{% if column.visible(grid.isReadyForExport) %}
					<td class="grid-column-{{ column.renderBlockId }}{% if column.class %} {{ column.class }}{% endif %}{% if column.align != 'left'%} text-{{ column.align }}{% endif %}{% if loop.last %} last-column{% endif %}{% if last_row %} last-row{% endif %}">{{ grid_cell(column, row, grid)|raw }}</td>
				{% endif %}
			{% endfor %}
		{% endspaceless %}
		</tr>
		{% else %}
			{{ grid_no_result(grid) }}
		{% endfor %}
	</tbody>
{% endblock grid_rows %}

{% block grid_pager_totalcount %}
	<strong class="display-ib mr-1">
		{{ '%count% výsledků. ' | transchoice(grid.totalCount, {'%count%': grid.totalCount}) }}
	</strong>
{% endblock %}

{% block grid_pager_selectpage %}
	{{ 'Stránka'|trans }}
	{% spaceless %}
		<span class="form-inline">
			<input type="button" class="prev btn btn-default" {% if grid.page <= 0 %}disabled="disabled"{% endif %} value="<" onclick="return {{ grid.hash }}_previousPage();"/>&nbsp;
			<input type="text" class="current form-control text-center" value="{{ grid.page + 1 }}" size="2" onkeypress="return {{ grid.hash }}_enterPage(event, parseInt(this.value)-1);"/>&nbsp;
			<input type="button" value=">" class="next btn btn-default" {% if grid.page >= grid.pageCount-1 %}disabled="disabled"{% endif %} onclick="return {{ grid.hash }}_nextPage();"/> {{ 'z %count% možných.'|trans({ '%count%' : grid.pageCount }) }}
		</span>
	{% endspaceless %}
{% endblock grid_pager_selectpage %}

{% block grid_pager_results_perpage %}
	<div class="right">
		{{ ' Zobrazit'|trans }}
		<span class="form-inline">
			<select onchange="return {{ grid.hash }}_resultsPerPage(this.value);" class="form-control">
				{% for key, value in grid.limits %}
					<option value="{{ key }}"{% if (key == grid.limit) %} selected="selected"{% endif %}>{{ value }}</option>
				{% endfor %}
			</select> {{ 'položek na stránku'|trans }}
		</span>
	</div>
{% endblock grid_pager_results_perpage %}

{% block grid_pager %}
	{% if pagerfanta %}
		{{ grid_pagerfanta(grid) }}
	{% else %}
		<div class="text-left clearfix well well-sm">
			{{ grid_pager_totalcount(grid) }}
			{{ grid_pager_selectpage(grid) }}
			{{ grid_pager_results_perpage(grid) }}
		</div>
	{% endif %}
{% endblock grid_pager %}