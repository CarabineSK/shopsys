{% block grid %}
<div class="js-grid" {% spaceless %}
		data-total-count="{{ grid.totalCount }}"
		{% if grid.inlineEdit %}
			data-inline-edit-service-name="{{ grid.inlineEditService.serviceName }}"
			data-inline-edit-url-get-form="{{ url('admin_grid_getform') }}"
			data-inline-edit-url-save-form="{{ url('admin_grid_saveform') }}"
		{% endif %}
		{% if grid.dragAndDrop %}
			data-drag-and-drop-ordering-entity-class="{{ grid.orderingEntityClass }}"
			data-drag-and-drop-url-save-ordering="{{ url('admin_grid_saveordering') }}"
		{% endif %}
	{% endspaceless %}>

	{% if grid.inlineEdit and grid.inlineEditService.canAddNewRow %}
		{{ gridView.renderBlock('grid_inline_edit_add_button') }}
	{% endif %}

	{% if grid.rows is not empty or grid.inlineEdit %}
		<div class="js-inline-edit-data-container{% if grid.rows is empty and grid.inlineEdit %} hidden{% endif %}">
			<div class="">
			{% if grid.enabledPaging %}
				{{ gridView.renderBlock('grid_pager') }}
			{% endif %}
			</div>
			<div class="table-touch">
				<table class="table-grid">
					{{ gridView.renderBlock('grid_titles') }}
					{{ gridView.renderBlock('grid_rows') }}
				</table>
			</div>
			<div class="">
				{% if grid.enabledPaging %}
					{{ gridView.renderBlock('grid_pager') }}
				{% endif %}
				{% if grid.dragAndDrop %}
					<button class="js-drag-and-drop-grid-submit btn btn-disabled" type="button">{{ 'Uložit změny v pořadí'|trans }}</button>
				{% endif %}
			</div>
		</div>
	{% endif %}

	{% if grid.rows is empty %}
		<div class="in-message in-message--info js-inline-edit-no-data">
			{{ gridView.renderBlock('grid_no_data') }}
		</div>
	{% endif %}
</div>
{% endblock %}

{% block grid_no_data %}
	{{ 'Nebyly nalezeny žádné záznamy.'|trans }}
{% endblock %}

{% block grid_value_cell %}
	{{ value }}
{% endblock%}

{% block grid_value_cell_edit %}
	{% if form[column.id] is defined %}
		{% form_theme form '@SS6Shop/Admin/Form/theme.html.twig' %}
		{{ form_widget(form[column.id]) }}
	{% endif -%}
{% endblock %}

{% block grid_titles %}
	<thead>
		<tr class="table-grid__row">
			{% if grid.dragAndDrop %}
				<th class="table-grid__cell table-grid__cell--move">
					<span class="svg svg-move"></span>
				</th>
			{% endif %}
			{% if grid.enabledSelecting %}
				<th class="table-grid__cell table-grid__cell--choice"><input type="checkbox" class="js-grid-mass-action-select-all" /></th>
			{% endif %}
			{% for column in grid.columns %}
				<th class="table-grid__cell {% if column.classAttribute %} {{ column.classAttribute }}{% endif %}">
					{{ gridView.renderTitleCell(column) }}
				</th>
			{% endfor %}
			{% if grid.actionColumns is not empty or grid.inlineEdit %}
				<th class="table-grid__cell table-grid__cell--actions {{ grid.actionColumnClassAttribute }}" colspan="{{ grid.actionColumns|length }}">{{ 'Úpravy'|trans }}</ht>
			{% endif  %}
		</tr>
	</thead>
{% endblock %}

{% block grid_title_cell %}
	{% if (column.sortable) %}
		{% if grid.orderSourceColumnName == column.id and grid.orderDirection == 'asc' %}
			{% set orderBy = '-' ~ column.id %}
		{% else %}
			{% set orderBy = column.id %}
		{% endif %}
		<a class="in-sort-arrows" href="{{ gridView.url({'order': orderBy}) }}">
			<span class="in-sort-arrows__link">{{ column.title }}</span>
			{% if grid.orderSourceColumnName == column.id %}
				{% if grid.orderDirection == 'desc' %}
					<span class="in-sort-arrows__item in-sort-arrows__item--down"></span>
				{% else %}
					<span class="in-sort-arrows__item in-sort-arrows__item--up"></span>
				{% endif %}
			{% endif %}
		</a>
	{% else %}
		{{ column.title }}
	{% endif %}
{% endblock %}

{% block grid_rows %}
	<tbody class="js-inline-edit-rows {% if grid.dragAndDrop %}js-drag-and-drop-grid-rows{% endif %}">
		{% for row in grid.rows %}
			{{ gridView.renderBlock(
				'grid_row',
				{
					loopIndex: loop.index,
					lastRow: loop.last,
					row: row
				}
			) }}
		{% endfor %}
	</tbody>
{% endblock %}

{% block grid_row %}
	<tr class="table-grid__row {{ cycle(['odd', 'even'], loopIndex) }} js-grid-row"
			{% if grid.inlineEdit and row is not null%} data-inline-edit-row-id="{{ grid.getRowId(row)|json_encode() }}"{% endif %}
			{% if grid.dragAndDrop %} data-drag-and-drop-grid-row-id="{{ grid.getRowId(row)|json_encode() }}"{% endif %}
	>
		{% if grid.dragAndDrop %}
			<td class="table-grid__cell table-grid__cell--move">
				<i class="cursor-move fa fa-arrows"></i>
			</td>
		{% endif %}
		{% if grid.enabledSelecting %}
			<td class="table-grid__cell table-grid__cell--choice">
				<input
					class="js-grid-mass-action-select-row"
					type="checkbox"
					name="g[{{ grid.id|escape('html_attr') }}][selectedRowIds][]"
					value="{{ grid.getRowId(row)|json_encode() }}"
					{% if grid.isRowSelected(row) %}checked="checked"{% endif %}
				/>
			</td>
		{% endif %}
		{% for column in grid.columns %}
			<td class="table-grid__cell js-grid-column-{{ column.id }}{% if column.classAttribute %} {{ column.classAttribute }}{% endif %}">
				{{ gridView.renderCell(column, row, form|default(null)) }}
			</td>
		{% endfor %}
		{% if grid.actionColumns|length > 0 or grid.inlineEdit %}
			<td class="table-grid__cell--actions js-inline-edit-unmatched-inputs">
				{% if grid.inlineEdit and form is defined %}
					<span class="js-inline-edit-buttons">
						<a href="#" class="js-inline-edit-save in-icon in-icon--ok svg svg-checked" title="{{ 'Uložit změny'|trans }}"></a>
						<a href="#" class="js-inline-edit-cancel in-icon in-icon--ok svg svg-circle-cross" title="{{ 'Zahodit změny'|trans }}"></a>
					</span>
					<span class="js-inline-edit-saving">
						<span class="svg svg-gear in-icon in-icon--spinner"></span>
					</span>
				{% else %}
					{% if grid.inlineEdit %}
						<a href="#" class="js-inline-edit-edit svg svg-pencil in-icon in-icon--edit" title="{{ 'Upravit'|trans }}"></a>
					{% endif %}
					{% for actionColumn in grid.actionColumns %}
						{{ gridView.renderActionCell(actionColumn, row)|raw }}
					{% endfor %}
				{% endif %}
				{% if form is defined %}
					{% if not render_rest is defined or render_rest %}
						{{- form_rest(form) -}}
					{% endif -%}
				{% endif -%}
			</td>
		{% endif %}
	</tr>
{% endblock %}

{% block grid_action_cell %}
	{% if actionColumn.type == 'edit' %}
		{% set icon = 'pencil' %}
	{% elseif actionColumn.type == 'delete' %}
		{% set icon = 'trash' %}
	{% else %}
		{% set icon = actionColumn.type %}
	{% endif %}
	<a
		class="in-icon in-icon--{{ actionColumn.type }} svg svg-{{ icon }} table-action{% if actionColumn.classAttribute %} {{ actionColumn.classAttribute }}{% endif %}{% if actionColumn.ajaxConfirm %} js-ajax-confirm{% endif %}"
		data-ajax-confirm-on-open="SS6.createConfirmDelete(this);"
		href="{{ actionColumn.targetUrl(row) }}"
		{% if actionColumn.confirmMessage is not empty -%}
			onclick="
				SS6.window({
					content: '{{ actionColumn.confirmMessage }}',
					buttonCancel: true,
					buttonContinue: true,
					textContinue: '{{ 'Ano'|trans }}',
					urlContinue: '{{ actionColumn.targetUrl(row) }}'
				});
				return false;"
		{%- endif %}
	></a>
{% endblock %}

{% block grid_pager_totalcount %}
	<strong class="">
		{{ 'Zobrazuji'|trans }} {{ entityName|default('záznamů'|trans)|trim }}
		{{ grid.paginationResults.fromItem }} - {{ grid.paginationResults.toItem }} {{ 'z'|trans }} {{ grid.totalCount }}
	</strong>
{% endblock %}

{% block grid_pager_selectpage %}
	{% spaceless %}
		<ul class="in-paging">

			{% if grid.page > 1 %}
				<li class="in-paging__item in-paging__item--prev">
					<a href="{{ gridView.url({'page': grid.page - 1}) }}">&lt;</a>
				</li>

				<li class="in-paging__item">
					<a href="{{ gridView.url({'page': 1}) }}">1</a>
				</li>
			{% endif %}

			{% set pagerExpand = 2 %}

			{% if grid.page > pagerExpand + 2 %}
				<li class="in-paging__item">
					<span>...</span>
				</li>

			{% endif %}

			{% for page in (grid.page - pagerExpand)..(grid.page) if page > 1 and page < grid.page %}
				<li class="in-paging__item">
					<a href="{{ gridView.url({'page': page}) }}">{{ page }}</a>
				</li>
			{% endfor %}
			<li class="in-paging__item">
				<strong>{{ grid.page }}</strong>
			</li>

			{% for page in (grid.page + 1)..(grid.page + pagerExpand) if page > grid.page and page < grid.pageCount %}
				<li class="in-paging__item">
					<a href="{{ gridView.url({'page': page}) }}">{{ page }}</a>
				</li>
			{% endfor %}

			{% if grid.page <= grid.pageCount - pagerExpand - 2 %}
				<li class="in-paging__item">
					<span>...</span>
				</li>
			{% endif %}

			{% if grid.page < grid.pageCount %}
				<li class="in-paging__item">
					<a href="{{ gridView.url({'page': grid.pageCount}) }}">{{ grid.pageCount }}</a>
				</li>
				<li class="in-paging__item in-paging__item--next">
					<a href="{{ gridView.url({'page': grid.page + 1}) }}">&gt;</a>
				</li>
			{% endif %}
		</ul>

		<div class="js-grid-go-to">
			<span>{{ 'Přejít na stránku:'|trans }}</span>
			<input
				type="number"
				min="1"
				max="{{ grid.pageCount }}"
				value="{{ grid.page }}"
				class="current input js-grid-go-to-input"
				size="2"
			/>
			<a class="btn js-grid-go-to-button" href="#" data-url="{{ gridView.url({'page' : '--page--'}) }}">&gt;&gt;</a>
		</div>
	{% endspaceless %}
{% endblock %}

{% block grid_pager_results_perpage %}
	<div class="">
		<span class="">
			{{ 'Položek na stránku:'|trans }}
			<select onchange="window.location = '{{ gridView.url({'limit' : '--limit--'}, 'page')|escape('js') }}'.replace('--limit--', this.value);" class="input">
				{% for value in grid.allowedLimits %}
					<option value="{{ value }}"{% if (value == grid.limit) %} selected="selected"{% endif %}>{{ value }}</option>
				{% endfor %}
			</select>
		</span>
	</div>
{% endblock %}

{% block grid_pager %}
	<div class="">
		{{ gridView.renderBlock('grid_pager_totalcount') }}
		{{ gridView.renderBlock('grid_pager_results_perpage') }}
		{% if grid.pageCount > 1 %}
			{{ gridView.renderBlock('grid_pager_selectpage') }}
		{% endif %}
	</div>
{% endblock %}

{% block grid_value_cell_type_boolean %}
	<span class="grid_boolean_{{ value ? 'true' : 'false' }} in-icon svg svg-{{ value ? 'visible in-icon--visible' : 'invisible in-icon--invisible' }}" title="{{ value ? 'Ano'|trans : 'Ne'|trans }}" ></span>
{% endblock %}

{% block grid_value_cell_type_DateTime %}
	{{ value|formatDateTime }}
{% endblock %}

{% block grid_hidden_inputs %}
	{% spaceless %}
		{% set name = name|default('') %}
		{% if parameter is iterable %}
			{% for key, value in parameter %}
				{% set currentParameter = parameter %}
				{% set parameter = value %}
				{% set currentName = name %}
				{% if name != '' %}
					{% set name = name ~ '[' ~ key ~ ']' %}
				{% else %}
					{% set name = key %}
				{% endif %}

					{{ block('grid_hidden_inputs') }}
				{% set parameter = currentParameter %}
				{% set name = currentName %}
			{% endfor %}
		{% else %}
			<input type="hidden" name="{{ name }}" value="{{ parameter }}" />
		{% endif %}
	{% endspaceless %}
{% endblock %}

{% block grid_inline_edit_add_button %}
	<a href="#" class="btn js-inline-edit-add">
		{{ addEntity|default('Vytvořit záznam'|trans) }}
	</a>
{% endblock %}