{% extends '@SS6Shop/Front/Layout/layoutWithPanel.html.twig' %}
{% import '@SS6Shop/Front/Inline/Paginator/paginator.html.twig' as paginator %}
{% import '@SS6Shop/Front/Content/Product/filterFormMacro.html.twig' as productFilterForm %}
{% import '@SS6Shop/Front/Content/Product/productListMacro.html.twig' as productList %}

{% block meta_robots %}
	{{ paginator.metaRobots(paginationResult) }}
{% endblock %}

{% block title %}
	- {{ 'Katalog zboží - '~category.name|trans }}
{% endblock %}

{% block panel_content %}
	{{ render(controller('SS6ShopBundle:Front/Category:panel')) }}
{% endblock %}

{% block main_content %}

	{{ render(controller('SS6ShopBundle:Front/Advert:box',{'positionName' : POSITION_PRODUCT_LIST})) }}
	<h1>{{ category.name|trans }}</h1>

	<h2>Seznam podkategorií</h2>
	{% for child in category.children %}
		<div><a href="{{ url('front_product_list', { id: child.id }) }}">{{ child.name }}</a></div>
	{% endfor %}

	{{ render(controller('SS6ShopBundle:Front/BestsellingProduct:list', { category: category })) }}

	<div class="position-relative js-product-list-with-filter">
		{% if paginationResult.results|length > 0 or filterFormSubmited %}
			<div class="box-filter js-product-filter">
				{{ productFilterForm.filterForm(
					filterForm,
					url('front_product_list', { id: category.id }),
					url('front_product_list', { id: category.id }),
					null,
					'product_list',
					productFilterCountData
				) }}
			</div>
		{% endif %}

		<div class="js-product-list-ajax-filter-products-with-controls">
			<div>
				{{ render(controller('SS6ShopBundle:Front/Product:selectOrderingModeForList')) }}
			</div>
			{% include '@SS6Shop/Front/Content/Product/productsWithControls.html.twig' with {paginationResult: paginationResult, filterFormSubmited: filterFormSubmited} %}
		</div>
	</div>

{% endblock %}