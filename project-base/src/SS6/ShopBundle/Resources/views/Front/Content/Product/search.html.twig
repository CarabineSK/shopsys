{% extends '@SS6Shop/Front/Layout/layoutWithPanel.html.twig' %}
{% import '@SS6Shop/Front/Inline/Paginator/paginator.html.twig' as paginator %}
{% import '@SS6Shop/Front/Content/Product/filterFormMacro.html.twig' as productFilterForm %}
{% import '@SS6Shop/Front/Content/Product/productListMacro.html.twig' as productList %}

{% block title %}
	{{ parent() }}
	- {{ 'Výsledky hledání "%searchText%"'|trans({ '%searchText%': searchText }) }}
{% endblock %}

{% block meta_robots %}
	{{ paginator.metaRobots(paginationResult) }}
{% endblock %}

{% block main_content %}
	<h1>{{ 'Výsledky hledání "%searchText%"'|trans({ '%searchText%': searchText }) }}</h1>

	{% if foundCategories|length > 0 %}
		<ul class="list-categories">
			{% for foundCategory in foundCategories %}
				<li class="list-categories__item">
					<a href="{{ url('front_product_list', { id: foundCategory.id }) }}" class="list-categories__item__block">
						<span class="list-categories__item__image">
							{{ image(foundCategory, { alt: foundCategory.name }) }}
						</span>
						<h3 class="list-categories__item__title">
							{{ foundCategory.name }}
						</h3>
					</a>
				</li>
			{% endfor %}
		</ul>
	{% endif %}

	<div class="js-product-list-with-filter">
		{% if paginationResult.results|length > 0 or filterFormSubmited %}
			<div class="box-filter js-product-filter">
				{{ productFilterForm.filterForm(
					filterForm,
					url('front_product_search'),
					url('front_product_search', { SEARCH_TEXT_PARAMETER : searchText }),
					searchText,
					'search',
					productFilterCountData,
					priceRange
				) }}
			</div>
		{% endif %}

		<div class="js-product-list-ajax-filter-products-with-controls">
			<div>
				{{ render(controller('SS6ShopBundle:Front/Product:selectOrderingModeForSearch')) }}
			</div>
			{% include '@SS6Shop/Front/Content/Product/productsWithControls.html.twig' with {paginationResult: paginationResult, filterFormSubmited: filterFormSubmited, searchText: searchText} %}
		</div>
	</div>
{% endblock %}
