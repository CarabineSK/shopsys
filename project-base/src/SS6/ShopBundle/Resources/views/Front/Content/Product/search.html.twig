{% extends '@SS6Shop/Front/Layout/layoutWithPanel.html.twig' %}
{% import '@SS6Shop/Front/Inline/Paginator/paginator.html.twig' as paginator %}
{% import '@SS6Shop/Front/Content/Product/filterFormMacro.html.twig' as productFilterForm %}
{% import '@SS6Shop/Front/Content/Product/productListMacro.html.twig' as productList %}

{% block title %}
	{{ parent() }}
	- {{ 'Výsledky hledání "%searchText%"'|trans({ '%searchText%': searchText }) }}
{% endblock %}

{% block meta_robots %}
	{{ paginator.metaRobots(paginationResult) }}
{% endblock %}

{% block panel_content %}
	{{ render(controller('SS6ShopBundle:Front/Category:panel')) }}
{% endblock %}

{% block main_content %}
	<h1>{{ 'Výsledky hledání "%searchText%"'|trans({ '%searchText%': searchText }) }}</h1>

	{% if foundCategories|length > 0 %}
		<div>
			<ul>
				{% for foundCategory in foundCategories %}
					<li>
						<a href="{{ url('front_product_list', { id: foundCategory.id }) }}">
							{{ foundCategory.name }}
						</a>
					</li>
				{% endfor %}
			</ul>
		</div>
	{% endif %}

	{% if productDetails|length > 0 or filterFormSubmited %}
		<div class="box-filter">
			{{ productFilterForm.filterForm(filterForm, url('front_product_search'), url('front_product_search', { q: searchText }), searchText, 'search') }}
		</div>
	{% endif %}

	{% if productDetails|length > 0 %}
		{% set entityName = 'zboží'|trans %}

		<div>
			{{ render(controller('SS6ShopBundle:Front/Product:selectOrderingMode')) }}
		</div>

		{{ paginator.paginatorNavigation(paginationResult, entityName) }}

		{{ productList.list(productDetails) }}

		{{ paginator.paginatorNavigation(paginationResult, entityName) }}
	{% else %}
		<div class="in-message in-message--static in-message--info js-flash-message">
			{{ 'Hledání neodpovídají žádné produkty'|trans }}
		</div>
	{% endif %}

{% endblock %}